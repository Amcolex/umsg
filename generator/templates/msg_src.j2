// Generated with jinja2
#include <umsg.h>
#include <{{topic_dict['name']}}.h>

// msg instances
{% for msg_dict in topic_dict["msgs"] %}
{% set prefix = topic_dict["name"]+'_'+msg_dict["msg_name"]%}
static umsg_msg_metadata_t msg_{{prefix}} = {.name = "{{prefix}}"};
{% endfor %}

// msg api's
{% for msg_dict in topic_dict["msgs"] %}
{% set prefix = topic_dict["name"]+'_'+msg_dict["msg_name"]%}
// {{prefix}}
msg_queue_handle_t umsg_{{prefix}}_subscribe(uint32_t prescaler, uint8_t length)
{
    return umsg_subscribe(&umsg_{{prefix}}, prescaler, sizeof(msg_{{prefix}}_t), length);
}
void umsg_{{prefix}}_publish(msg_{{prefix}}_t* data)
{
    umsg_publish(&umsg_{{prefix}}, data);
}
uint8_t umsg_{{prefix}}_receive(umsg_queue_handle_t queue, msg_{{prefix}}_t* data, uint32_t timeout)
{
    return umsg_receive(queue, data, timeout);
}
uint8_t umsg_{{prefix}}_peek(msg_{{prefix}}_t* data)
{
    return umsg_peek(&umsg_{{prefix}}, data, sizeof(msg_{{prefix}}_t));
}

{% endfor %}